import{f as n}from"./app.ae9b149f.js";import{_ as s}from"./plugin-vue_export-helper.21dcd24c.js";const a={},t=n(`<h1 id="struct" tabindex="-1"><a class="header-anchor" href="#struct" aria-hidden="true">#</a> Struct</h1><p>Struct are a prototype base object similar to Javascript&#39;s object. It is a prototype based object system.</p><p>You can change a struct&#39;s prototype by internal member &#39;$prototype&#39;.</p><p>The most significant difference between struct and class, is that struct&#39;s member can be created and modified during runtime. And you won&#39;t get errors when accessing a non-exist struct member, you simply got a null value.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>obj<span class="token punctuation">.</span>race <span class="token operator">=</span> <span class="token string">&#39;dragon&#39;</span><span class="token punctuation">;</span> <span class="token comment">// okay, this will define a new member on obj.</span>
<span class="token keyword">var</span> lvl <span class="token operator">=</span> obj<span class="token punctuation">.</span>level<span class="token punctuation">;</span> <span class="token comment">// okay, although lvl&#39;s value will be null</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="dynamically-delete-a-struct-member" tabindex="-1"><a class="header-anchor" href="#dynamically-delete-a-struct-member" aria-hidden="true">#</a> Dynamically delete a struct member</h2><p>It is possible to delete a struct field using &#39;delete&#39; keyword.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;the world&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">meaning</span><span class="token operator">:</span> <span class="token number">42</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">delete</span> a<span class="token punctuation">.</span>meaning<span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { name: &#39;the world&#39; }</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="literal-struct" tabindex="-1"><a class="header-anchor" href="#literal-struct" aria-hidden="true">#</a> Literal struct</h2><p>Literal struct are expressions in the form of &#39;{key: value}&#39;</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;jimmy&#39;</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">17</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>The key must be either a identifier, or a string literal (not includes string interpolation).</p><h2 id="named-struct" tabindex="-1"><a class="header-anchor" href="#named-struct" aria-hidden="true">#</a> Named struct</h2><p>Named struct&#39;s declaration are like class, you can have constructors, getter and setters.</p><p>You don&#39;t have to declare the fields before assign it like you must do in Class declarations. This is useful for constructor.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>struct Named <span class="token punctuation">{</span>
  <span class="token function">construct</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">name</span><span class="token operator">:</span> str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>The named struct declaration itself is also a struct. you can access and modify its member.</p><p>However this kind of modification won&#39;t affect the object that created before.</p><div class="language-dart ext-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">final</span> n <span class="token operator">=</span> <span class="token class-name">Named</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&#39;Jimmy&#39;</span></span><span class="token punctuation">)</span>
<span class="token class-name">Named</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&#39;Jones&#39;</span></span>
<span class="token function">print</span><span class="token punctuation">(</span>n<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// &#39;Jimmy&#39;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>You can define static fields on a named struct.</p><p>Unlike class static members, the object created by the struct constructor can also access these fields through &#39;.&#39; operator.</p><p>And if you changed the static fields in a named struct. All the object created from this named struct, nomatter it was created before or after the change, will be getting the new value.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>struct Named <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">var</span> race <span class="token operator">=</span> <span class="token string">&#39;Human&#39;</span>
  <span class="token keyword">var</span> name
  <span class="token function">construct</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
final n <span class="token operator">=</span> <span class="token function">Named</span><span class="token punctuation">(</span><span class="token string">&#39;Jimmy&#39;</span><span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span>n<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// Jimmy</span>
<span class="token function">print</span><span class="token punctuation">(</span>Named<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// null</span>
Named<span class="token punctuation">.</span>race <span class="token operator">=</span> <span class="token string">&#39;Dragon&#39;</span>
<span class="token function">print</span><span class="token punctuation">(</span>n<span class="token punctuation">.</span>race<span class="token punctuation">)</span> <span class="token comment">// Dragon</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>One important thing worth noted: within a named struct&#39;s method, <strong>you cannot omit &#39;this&#39; when accessing its own members</strong> like you would do in a class method.</p><h2 id="struct-inherit" tabindex="-1"><a class="header-anchor" href="#struct-inherit" aria-hidden="true">#</a> Struct inherit</h2><p>Named struct can declare its prototype same way as a class declare its super class.</p><p>The extended struct are not necessarily be another named struct, you can inherit a variable with a value of a struct literal.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>struct Animal <span class="token punctuation">{</span>
  <span class="token literal-property property">walk</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&#39;Animal walking.&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
struct Bird <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">fly</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&#39;Bird flying.&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token literal-property property">walk</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&#39;Bird walking.&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>Redirecting constructors also works in struct. Except you cannot redirect to <strong>super</strong>, usage is same to class constructors.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>struct Tile <span class="token punctuation">{</span>
  <span class="token function">construct</span> <span class="token punctuation">(</span><span class="token parameter">left<span class="token punctuation">,</span> top</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>left <span class="token operator">=</span> left
    <span class="token keyword">this</span><span class="token punctuation">.</span>top <span class="token operator">=</span> top
  <span class="token punctuation">}</span>

  construct <span class="token function">fromPosition</span><span class="token punctuation">(</span>position<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">(</span>position<span class="token punctuation">.</span>left<span class="token punctuation">,</span> position<span class="token punctuation">.</span>top<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

final t1 <span class="token operator">=</span> <span class="token function">Tile</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>
final t2 <span class="token operator">=</span> Tile<span class="token punctuation">.</span><span class="token function">fromPosition</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">left</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token literal-property property">top</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">print</span><span class="token punctuation">(</span>t1<span class="token punctuation">,</span> t2<span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div>`,30);function e(p,o){return t}var l=s(a,[["render",e]]);export{l as default};

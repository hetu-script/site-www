import{r as s,o as r,c,b as a,e,w as l,F as i,f as t,d as n}from"./app.c1f9bf1f.js";import{_ as u}from"./plugin-vue_export-helper.21dcd24c.js";const k={},d=t(`<h1 id="type-system" tabindex="-1"><a class="header-anchor" href="#type-system" aria-hidden="true">#</a> Type system</h1><p><strong>WARNING: Type system is not fully implemented yet. It&#39;s more of a kind of annotation. You won&#39;t get analysis errors from them currently.</strong></p><h2 id="type-as-a-value" tabindex="-1"><a class="header-anchor" href="#type-as-a-value" aria-hidden="true">#</a> Type as a value</h2><p>Type is a top class value in Hetu, it can be assigned and returned.</p><p>However, you cannot use type value in normal expressions except class names. Normally you have to either use a type declaration to bind a type value to a identifier. Or to get a type value expression after is/as keyword.</p><p>There are 4 kinds of type values:</p><h3 id="builtin-type" tabindex="-1"><a class="header-anchor" href="#builtin-type" aria-hidden="true">#</a> builtin type</h3><p>Some types are builtin keyword and has special use:</p><h4 id="any" tabindex="-1"><a class="header-anchor" href="#any" aria-hidden="true">#</a> any</h4><p>This is the equivalent keyword to Dart&#39;s dynamic, to indicate that this type can be assign with anything.</p><p><strong>void, never &amp; unknown are also builtin keyword, they are part of static type checker, and they are not fully implemented for now.</strong></p><h3 id="nominal-type" tabindex="-1"><a class="header-anchor" href="#nominal-type" aria-hidden="true">#</a> nominal type</h3><p>All class names can be used in a type value expression.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="structural-type" tabindex="-1"><a class="header-anchor" href="#structural-type" aria-hidden="true">#</a> structural type</h3>`,15),y=n("Structural type are a kind of "),m={href:"https://en.wikipedia.org/wiki/Duck_typing",target:"_blank",rel:"noopener noreferrer"},b=n("duck typing system"),h=n(". It is used with "),f=n("struct"),g=n("."),v=t(`<p>It&#39;s syntax like the struct literal, however, you have to write types rather than a expression value after the key:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>type structTypedef <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> str<span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> num<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="function-type" tabindex="-1"><a class="header-anchor" href="#function-type" aria-hidden="true">#</a> function type</h3><p>Function types are a kind of type value expression that consists of a parameter type brackets and a return value.</p><p>Unlike normal function declarations, You cannot omit any part in the function type expression.</p><p>It should have a pair of brackets, a single arrow and a return type.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>type funcTypedef <span class="token operator">=</span> <span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> num
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h2 id="type-declaration" tabindex="-1"><a class="header-anchor" href="#type-declaration" aria-hidden="true">#</a> Type declaration</h2><p>You can assign a type value to a name with <strong>type</strong> declaration.</p><p>Type declaration is similar to a variable declaration, except it must has a initializer type expression.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">PType</span> <span class="token operator">=</span> Person
<span class="token keyword">type</span> <span class="token class-name">funcTypedef</span> <span class="token operator">=</span> <span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> num
<span class="token keyword">type</span> <span class="token class-name">structTypedef</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> str<span class="token punctuation">,</span>
  age<span class="token operator">:</span> num<span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="use-is-to-check-a-type-in-run-time" tabindex="-1"><a class="header-anchor" href="#use-is-to-check-a-type-in-run-time" aria-hidden="true">#</a> Use is to check a type in run-time</h2><p>Use <strong>is</strong> to do a run-time type check. The expression after <strong>is</strong> will be parsed into a valid type value.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>fun <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>value is str<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&#39;A String!&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>value is num<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&#39;A Number!&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&#39;Unknown type!&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="use-typeof-to-get-a-type-in-run-time" tabindex="-1"><a class="header-anchor" href="#use-typeof-to-get-a-type-in-run-time" aria-hidden="true">#</a> Use typeof to get a type in run-time</h2><p>Use <strong>typeof</strong> keyword to dynamically get the runtime type of a value.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code>fun main <span class="token punctuation">{</span>
  <span class="token comment">// decalre a function typedef</span>
  <span class="token keyword">type</span> <span class="token class-name">funcTypedef</span> <span class="token operator">=</span> <span class="token function">fun</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> num
  <span class="token comment">// assign a function to a value of a certain function type</span>
  <span class="token class-name"><span class="token keyword">var</span></span> numparse<span class="token operator">:</span> funcTypedef <span class="token operator">=</span> <span class="token function">fun</span><span class="token punctuation">(</span>value<span class="token operator">:</span> str<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> num <span class="token punctuation">{</span> <span class="token keyword">return</span> num<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">}</span>
  <span class="token comment">// get a value&#39;s runtime type and return it from a function</span>
  <span class="token keyword">var</span> getType <span class="token operator">=</span> fun <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">typeof</span> numparse <span class="token punctuation">}</span>
  <span class="token keyword">var</span> funcTypedef2 <span class="token operator">=</span> <span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token comment">// use this new type</span>
  <span class="token keyword">var</span> strlength<span class="token operator">:</span> funcTypedef2 <span class="token operator">=</span> <span class="token function">fun</span><span class="token punctuation">(</span>value<span class="token operator">:</span> str<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> num <span class="token punctuation">{</span> <span class="token keyword">return</span> value<span class="token punctuation">.</span>length <span class="token punctuation">}</span>
  <span class="token comment">// expected output: 11</span>
  <span class="token function">print</span><span class="token punctuation">(</span><span class="token function">strlength</span><span class="token punctuation">(</span><span class="token string">&#39;hello world&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>The type of a type is always &#39;type&#39;, no matter it&#39;s a primitive, instance, or function type.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">functype</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token builtin">any</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> functype<span class="token punctuation">)</span> <span class="token comment">// type</span>
<span class="token operator">&gt;&gt;&gt;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div>`,19);function w(x,_){const p=s("ExternalLinkIcon"),o=s("RouterLink");return r(),c(i,null,[d,a("p",null,[y,a("a",m,[b,e(p)]),h,e(o,{to:"/en-US/grammar/struct/"},{default:l(()=>[f]),_:1}),g]),v],64)}var N=u(k,[["render",w]]);export{N as default};

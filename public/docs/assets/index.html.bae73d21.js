import{r as e,o as p,c as o,b as s,e as c,w as l,F as r,f as n,d as a}from"./app.321bd41d.js";import{_ as u}from"./plugin-vue_export-helper.21dcd24c.js";const i={},d=n(`<h2 id="hetu-script" tabindex="-1"><a class="header-anchor" href="#hetu-script" aria-hidden="true">#</a> hetu_script</h2><p>\u4F7F\u7528 dart pub add \u547D\u4EE4\u6765\u5B89\u88C5\u6700\u65B0\u7248\u672C\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>dart pub add hetu_script
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>\u5BF9\u4E8E Flutter \u9879\u76EE\uFF0C\u4F7F\u7528 flutter \u7248\u672C\u7684\u547D\u4EE4\u884C\u5DE5\u5177\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>flutter pub add hetu_script
flutter pub add hetu_script_flutter
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="hetu-script-dev-tools" tabindex="-1"><a class="header-anchor" href="#hetu-script-dev-tools" aria-hidden="true">#</a> hetu_script_dev_tools</h2><p>\u5982\u679C\u4F60\u9700\u8981\u5728\u4EE3\u7801\u4E2D\uFF0C\u4F7F\u7528 import \u8BED\u53E5\u5BFC\u5165\u4F60\u7684\u6587\u4EF6\u7CFB\u7EDF\u4E0A\u7684\u53E6\u4E00\u4E2A\u4EE3\u7801\u6587\u4EF6\u7684\u5185\u5BB9\u3002\u9700\u8981\u5B89\u88C5\u8FD9\u4E2A\u5305\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>dart pub add hetu_script_dev_tools
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>\u7136\u540E\u4F60\u9700\u8981\u4F7F\u7528 <strong>HTFileSystemResourceContext</strong> \u8F85\u52A9\u7C7B, \u5728\u521B\u5EFA\u89E3\u91CA\u5668\u65F6\u4F5C\u4E3A\u53C2\u6570\u4F20\u5165\uFF0C\u66FF\u6362\u6389\u9ED8\u8BA4\u7684 sourceContext\u3002</p><p><strong>HTFileSystemResourceContext</strong> \u7684 root \u53C2\u6570\u662F\u4EE3\u7801\u6587\u4EF6\u5B58\u653E\u7684\u6839\u76EE\u5F55\uFF0C\u5982\u679C\u4E0D\u6307\u5B9A\uFF0C\u4F1A\u4F7F\u7528\u5F53\u524D\u9879\u76EE\u7684\u6839\u76EE\u5F55\u3002</p><p>\u4E4B\u540E\uFF0C\u4F60\u5C31\u53EF\u4EE5\u4F7F\u7528\u89E3\u91CA\u5668\u4E0A\u7684 <strong>evalFile()</strong> \u65B9\u6CD5\u6765\u76F4\u63A5\u8F7D\u5165\u4E00\u4E2A\u4EE3\u7801\u6587\u4EF6\u3002\u4F60\u53EF\u4EE5\u7701\u7565\u6389\u8DEF\u5F84\u4E2D root \u7684\u90E8\u5206\u3002</p><div class="language-dart ext-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">import</span> <span class="token string-literal"><span class="token string">&#39;package:hetu_script/hetu_script.dart&#39;</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">&#39;package:hetu_script_dev_tools/hetu_script_dev_tools.dart&#39;</span></span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">final</span> sourceContext <span class="token operator">=</span> <span class="token class-name">HTFileSystemResourceContext</span><span class="token punctuation">(</span>root<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&#39;../../script/&#39;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">final</span> hetu <span class="token operator">=</span> <span class="token class-name">Hetu</span><span class="token punctuation">(</span>sourceContext<span class="token punctuation">:</span> sourceContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
  hetu<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">final</span> result <span class="token operator">=</span> hetu<span class="token punctuation">.</span><span class="token function">evalFile</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&#39;import_test1.ht&#39;</span></span><span class="token punctuation">,</span> invokeFunc<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&#39;main&#39;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>\u5728\u4EE3\u7801\u4E2D\u901A\u8FC7 import \u8BED\u53E5\u5F15\u5165\u5176\u4ED6\u4EE3\u7801\u6587\u4EF6\u7684\u4F8B\u5B50\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token string">&#39;hello.ht&#39;</span> <span class="token keyword">as</span> h

fun main <span class="token punctuation">{</span>
  <span class="token keyword">return</span> h<span class="token punctuation">.</span><span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div>`,14),k=a("\u53E6\u5916\uFF0C\u8FD9\u4E2A\u5305\u8FD8\u63D0\u4F9B\u4E86\u4E00\u4E2A "),m=s("strong",null,"REPL",-1),b=a(" \u5DE5\u5177\u7528\u6765\u8F85\u52A9\u6D4B\u8BD5\u3002"),g=n(`<h2 id="hetu-script-flutter" tabindex="-1"><a class="header-anchor" href="#hetu-script-flutter" aria-hidden="true">#</a> hetu_script_flutter</h2><p>\u5BF9\u4E8E\u60F3\u8981\u5728 Flutter APP \u4E2D\u5F15\u5165\u4F5C\u4E3A assets \u8D44\u6E90\u6587\u4EF6\u7684\u811A\u672C\u7684\u9700\u6C42\uFF0C\u53EF\u4EE5\u5B89\u88C5\u8FD9\u4E2A\u5305\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>dart pub add hetu_script_flutter
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">assets</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> scripts/main.ht
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>\u548C hetu_script_dev_tools \u7C7B\u4F3C\uFF0C\u4F60\u9700\u8981\u7528\u65B0\u7684 <strong>HTAssetResourceContext</strong> \u8F85\u52A9\u7C7B, \u5728\u521B\u5EFA\u89E3\u91CA\u5668\u65F6\u4F5C\u4E3A\u53C2\u6570\u4F20\u5165\uFF0C\u66FF\u6362\u6389\u9ED8\u8BA4\u7684 sourceContext\u3002</p><p><strong>HTAssetResourceContext</strong> \u7684 root \u53C2\u6570\u662F\u4EE3\u7801\u6587\u4EF6\u5B58\u653E\u7684\u6839\u76EE\u5F55\uFF0C\u5982\u679C\u4E0D\u6307\u5B9A\uFF0C\u4F1A\u4F7F\u7528\u5F53\u524D\u9879\u76EE<strong>\u6839\u76EE\u5F55\u4E0B\u7684 &#39;scripts/&#39;</strong>\u3002</p><p>\u5728 Flutter APP \u4E2D\uFF0C\u4F7F\u7528 <strong>initFlutter()</strong> \u53D6\u4EE3\u539F\u672C\u7684 <strong>init()</strong> \u6765\u521D\u59CB\u5316\u89E3\u91CA\u5668\uFF0C\u8FD9\u4F1A\u63D0\u524D\u8F7D\u5165\u4F60\u5728 pubspec.yaml \u4E2D\u58F0\u660E\u7684\u4EE3\u7801\u8D44\u6E90\u6587\u4EF6\u3002\u6CE8\u610F\u8FD9\u662F\u4E00\u4E2A async \u65B9\u6CD5\uFF0C\u56E0\u6B64\u9700\u8981\u52A0\u4E0A await \u5173\u952E\u5B57\u3002</p><p>\u4E4B\u540E\uFF0C\u4F60\u5C31\u53EF\u4EE5\u4F7F\u7528\u89E3\u91CA\u5668\u4E0A\u7684 <strong>evalFile()</strong> \u65B9\u6CD5\u6765\u76F4\u63A5\u8F7D\u5165\u4E00\u4E2A\u4EE3\u7801\u6587\u4EF6\u3002\u4F60\u53EF\u4EE5\u7701\u7565\u6389\u8DEF\u5F84\u4E2D root \u7684\u90E8\u5206\u3002</p><div class="language-dart ext-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">final</span> sourceContext <span class="token operator">=</span> <span class="token class-name">HTAssetResourceContext</span><span class="token punctuation">(</span>root<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&#39;scripts/&#39;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">final</span> hetu <span class="token operator">=</span> <span class="token class-name">Hetu</span><span class="token punctuation">(</span>sourceContext<span class="token punctuation">:</span> sourceContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">await</span> hetu<span class="token punctuation">.</span><span class="token function">initFlutter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">final</span> result <span class="token operator">=</span> hetu<span class="token punctuation">.</span><span class="token function">evalFile</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&#39;main.ht&#39;</span></span><span class="token punctuation">,</span> invokeFunc<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&#39;main&#39;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div>`,9);function h(_,v){const t=e("RouterLink");return p(),o(r,null,[d,s("p",null,[k,c(t,{to:"/zh-Hans/guide/command_line_tool/#REPL"},{default:l(()=>[m]),_:1}),b]),g],64)}var y=u(i,[["render",h]]);export{y as default};

<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Common API - Hetu Script Language | Hetu Script Language</title>
    <meta name="description" content="A lightweight script language written in Dart for embedding in Flutter apps.">
    <link rel="stylesheet" href="/assets/style.019f39fc.css">
    <link rel="modulepreload" href="/assets/Home.0ebac21b.js">
    <link rel="modulepreload" href="/assets/app.7121ab72.js">
    <link rel="modulepreload" href="/assets/docs_en-US_common_api_index.md.d3be55ed.lean.js">
    <link rel="modulepreload" href="/assets/app.7121ab72.js">
    <meta name="twitter:title" content="Common API - Hetu Script Language | Hetu Script Language">
    <meta property="og:title" content="Common API - Hetu Script Language | Hetu Script Language">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-675d8756><div class="sidebar-button" data-v-675d8756><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/docs/en-US/" aria-label="Hetu Script Language, back to home" data-v-675d8756 data-v-4a583abe><!----> Hetu Script Language</a><div class="flex-grow" data-v-675d8756></div><div class="nav" data-v-675d8756><nav class="nav-links" data-v-675d8756 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-dropdown-link" data-v-eab3edfe data-v-56bf3a3f><button class="button" data-v-56bf3a3f><span class="button-text" data-v-56bf3a3f>Tool</span><span class="right button-arrow" data-v-56bf3a3f></span></button><ul class="dialog" data-v-56bf3a3f><!--[--><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item isExternal" href="https://marketplace.visualstudio.com/items?itemName=hetu-script.hetuscript" target="_blank" rel="noopener noreferrer" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>IDE Extension</span><span class="icon" data-v-bbc27490><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-bbc27490><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://github.com/hetu-script/hetu-script" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>Github <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><!----><!----></nav></div><!--[--><!--]--></header><aside class="sidebar" data-v-83e92a68><nav class="nav-links nav" data-v-83e92a68 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-dropdown-link" data-v-eab3edfe data-v-56bf3a3f><button class="button" data-v-56bf3a3f><span class="button-text" data-v-56bf3a3f>Tool</span><span class="right button-arrow" data-v-56bf3a3f></span></button><ul class="dialog" data-v-56bf3a3f><!--[--><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item isExternal" href="https://marketplace.visualstudio.com/items?itemName=hetu-script.hetuscript" target="_blank" rel="noopener noreferrer" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>IDE Extension</span><span class="icon" data-v-bbc27490><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-bbc27490><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://github.com/hetu-script/hetu-script" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>Github <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><!----><!----></nav><!--[--><!--]--><ul class="sidebar-links" data-v-83e92a68><!--[--><li class="sidebar-link"><a class="sidebar-link-item" href="/docs/en-US/">Introduction</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/docs/en-US/installation/">Installation</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item active" href="/docs/en-US/common_api/">Common API</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#interpreter">Interpreter</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#init">init()</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#eval">eval()</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#compile-loadbytecode">compile(), loadBytecode()</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#invoke-a-method-on-hetu-object">Invoke a method on Hetu object</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#resourcecontext">ResourceContext</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/docs/en-US/syntax/">Language</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/docs/en-US/module/">Module import &amp; export</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/docs/en-US/binding/">Communicating with Dart</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/docs/en-US/advanced/">Advanced topics</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/docs/en-US/analyzer/">Analyzer</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/docs/en-US/command_line_tool/">Command line tool</a><!----></li><!--]--></ul><!--[--><!--]--></aside><div class="sidebar-mask"></div><main class="page" data-v-7eddb2c4><div class="container" data-v-7eddb2c4><!--[--><!--]--><div style="position:relative;" class="content" data-v-7eddb2c4><div><h1 id="common-api" tabindex="-1">Common API <a class="header-anchor" href="#common-api" aria-hidden="true">#</a></h1><h2 id="interpreter" tabindex="-1">Interpreter <a class="header-anchor" href="#interpreter" aria-hidden="true">#</a></h2><p>The most common class you will be using is the Interpreter, it is named as &#39;Hetu&#39; in this library.</p><h3 id="init" tabindex="-1">init() <a class="header-anchor" href="#init" aria-hidden="true">#</a></h3><p>This method is a convenient way to load some shared modules together before you can use them.</p><ul><li><strong>includes</strong>: Hetu source in String literal form. You can also use <strong>eval</strong> methods to load them later.</li><li><strong>externalFunctions</strong>: Dart functions to be binded with a external function declaration in Hetu. You can also use <strong>bindExternalFunction</strong> methods to load them later.</li><li><strong>HTExternalFunctionTypedef</strong>: Dart typedefs to be used when a Hetu function want to be converted to a Dart function when evaluated. You can also use <strong>bindExternalFunctionType</strong> methods to load them later.</li><li><strong>HTExternalClass</strong>: Dart class bindings to be used by Hetu to get class definitions. You can also use <strong>bindExternalClass</strong> methods to load them later.</li></ul><div class="language-dart"><pre><code><span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> includes <span class="token operator">=</span> <span class="token keyword">const</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Function</span><span class="token punctuation">&gt;</span></span> externalFunctions <span class="token operator">=</span> <span class="token keyword">const</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">HTExternalFunctionTypedef</span><span class="token punctuation">&gt;</span></span> externalFunctionTypedef <span class="token operator">=</span> <span class="token keyword">const</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">HTExternalClass</span><span class="token punctuation">&gt;</span></span> externalClasses <span class="token operator">=</span> <span class="token keyword">const</span> <span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="eval" tabindex="-1">eval() <a class="header-anchor" href="#eval" aria-hidden="true">#</a></h3><p>To parse, analyze, compile and load a Hetu source from a String literal.</p><div class="language-dart"><pre><code><span class="token keyword">dynamic</span> <span class="token function">eval</span><span class="token punctuation">(</span><span class="token class-name">String</span> content<span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token class-name">String</span><span class="token operator">?</span> moduleFullName<span class="token punctuation">,</span>
    <span class="token class-name">String</span><span class="token operator">?</span> libraryName<span class="token punctuation">,</span>
    bool globallyImport <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    bool isScript <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    bool isStrictMode <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    bool isLibraryEntry <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token class-name">String</span><span class="token operator">?</span> invokeFunc<span class="token punctuation">,</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token keyword">dynamic</span><span class="token punctuation">&gt;</span></span> positionalArgs <span class="token operator">=</span> <span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token keyword">dynamic</span><span class="token punctuation">&gt;</span></span> namedArgs <span class="token operator">=</span> <span class="token keyword">const</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">HTType</span><span class="token punctuation">&gt;</span></span> typeArgs <span class="token operator">=</span> <span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    bool errorHandled <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ul><li><strong>content</strong>: Hetu source as String literal.</li><li><strong>moduleFullName</strong>: The name of this <strong>HTModule</strong>, it will be used when other module try to import from it.</li><li><strong>globallyImport</strong>: Whether you want the content of this source is visible to <strong>global</strong> namespace. It&#39;s a quicker way to let other modules to use without import statement.</li><li><strong>isScript</strong>: Whether let the interpreter evaluate this source as a script. For more information, check <strong>source type</strong>(../module/index.md#Source-type).</li><li><strong>isStrictMode</strong>: If strict mode is true, the condition expression used by if/while/do/ternery must be a boolean value. Otherwise there will be inexplicit type conversion.</li><li><strong>invokeFunc</strong>: Invoke a function immediately after evaluation. The function&#39;s name and parameter can be of any form. The arguments of this function call are provided by <strong>positionalArgs</strong> and <strong>namedArgs</strong>. You can also use the separate method <strong>invoke</strong> to do the same thing.</li></ul><h3 id="compile-loadbytecode" tabindex="-1">compile(), loadBytecode() <a class="header-anchor" href="#compile-loadbytecode" aria-hidden="true">#</a></h3><p>These methods is useful if you wish for more efficient runtime of the script. You can compile a source into bytecode. And run it at another time so that the interpreter will skip the parsing, analyzing and compiling process.</p><h2 id="invoke-a-method-on-hetu-object" tabindex="-1">Invoke a method on Hetu object <a class="header-anchor" href="#invoke-a-method-on-hetu-object" aria-hidden="true">#</a></h2><p>Besides the <strong>invoke</strong> method on interpreter, you can also use the same named methods on <strong>HTClass</strong> and <strong>HTInstance</strong> and <strong>call</strong> on <strong>HTFunction</strong>, if you have those object passed from script into the Dart.</p><h2 id="resourcecontext" tabindex="-1">ResourceContext <a class="header-anchor" href="#resourcecontext" aria-hidden="true">#</a></h2><p>If you installed &#39;hetu_script_dev_tools&#39; or &#39;hetu_script_flutter&#39;, they will handle the source context for you so you won&#39;t need to add the source file into the context manually. However if you cannot use these packages(for example if your code are on web browser), you can use methods below on <strong>HTOverlayContext</strong> to manage sources.</p><div class="language-dart"><pre><code><span class="token keyword">void</span> <span class="token function">addResource</span><span class="token punctuation">(</span><span class="token class-name">String</span> fullName<span class="token punctuation">,</span> <span class="token class-name">HTSource</span> resource<span class="token punctuation">)</span>

<span class="token keyword">void</span> <span class="token function">removeResource</span><span class="token punctuation">(</span><span class="token class-name">String</span> fullName<span class="token punctuation">)</span>

<span class="token keyword">void</span> <span class="token function">updateResource</span><span class="token punctuation">(</span><span class="token class-name">String</span> fullName<span class="token punctuation">,</span> <span class="token class-name">HTSource</span> resource<span class="token punctuation">)</span>
</code></pre></div></div></div><footer class="page-footer" data-v-7eddb2c4 data-v-fb8d84c6><div class="edit" data-v-fb8d84c6><div class="edit-link" data-v-fb8d84c6 data-v-1ed99556><!----></div></div><div class="updated" data-v-fb8d84c6><!----></div></footer><div class="next-and-prev-link" data-v-7eddb2c4 data-v-38ede35f><div class="container" data-v-38ede35f><div class="prev" data-v-38ede35f><a class="link" href="/docs/en-US/installation/" data-v-38ede35f><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-prev" data-v-38ede35f><path d="M19,11H7.4l5.3-5.3c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-7,7c-0.1,0.1-0.2,0.2-0.2,0.3c-0.1,0.2-0.1,0.5,0,0.8c0.1,0.1,0.1,0.2,0.2,0.3l7,7c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.4,13H19c0.6,0,1-0.4,1-1S19.6,11,19,11z"></path></svg><span class="text" data-v-38ede35f>Installation</span></a></div><div class="next" data-v-38ede35f><a class="link" href="/docs/en-US/syntax/" data-v-38ede35f><span class="text" data-v-38ede35f>Language</span><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-next" data-v-38ede35f><path d="M19.9,12.4c0.1-0.2,0.1-0.5,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.3l-7-7c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l5.3,5.3H5c-0.6,0-1,0.4-1,1s0.4,1,1,1h11.6l-5.3,5.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l7-7C19.8,12.6,19.9,12.5,19.9,12.4z"></path></svg></a></div></div></div><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"docs_en-us_advanced_index.md\":\"4c722a80\",\"docs_en-us_analyzer_index.md\":\"d7351463\",\"docs_en-us_binding_index.md\":\"319eeade\",\"docs_en-us_command_line_tool_index.md\":\"0079215c\",\"docs_en-us_common_api_index.md\":\"d3be55ed\",\"docs_en-us_index.md\":\"86e2b16b\",\"docs_en-us_installation_index.md\":\"e9c7a029\",\"docs_en-us_module_index.md\":\"4162853f\",\"docs_en-us_syntax_index.md\":\"16880def\"}")</script>
    <script type="module" async src="/assets/app.7121ab72.js"></script>
    
  </body>
</html>